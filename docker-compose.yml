  
services:
  web:  # Define a service named 'web'
    container_name: shareit-be
    image: shareit-be # Replace with your image name
    build:
      context: .  # Build context (current directory)
      dockerfile: ./ShareItAPI/Dockerfile  # Specify the Dockerfile to use
    ports:
      - "80:80"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      # CORS Configuration - Frontend URL
      - Frontend__BaseUrl=${FRONTEND_URL:-https://localhost:7045}
      # OpenAI Configuration
      - OpenAI__BaseAppUrl=${FRONTEND_URL:-https://localhost:7045}
      # VNPay Callback URL
      - Vnpay__CallbackUrl=${BACKEND_URL:-https://localhost:7256}/api/payment/Vnpay/Callback
      
  frontend:
    container_name: shareit-fe
    image: shareit-fe
    build:
      context: .
      dockerfile: ./ShareItFE/Dockerfile
    ports:
      - "7045:80"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      # API Configuration - Backend URL
      - ApiSettings__BaseUrl=${BACKEND_URL:-https://localhost:7256}/api
      - ApiSettings__RootUrl=${BACKEND_URL:-https://localhost:7256}
      - FrontendBaseUrl=${FRONTEND_URL:-https://localhost:7045}
    depends_on:
      - web